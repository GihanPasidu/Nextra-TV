<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free TV - Live Television Streaming | CloudNextra Solutions</title>
    <meta name="description" content="Watch thousands of free live TV channels from around the world. Stream news, sports, entertainment, and more with Free TV by CloudNextra Solutions.">
    <meta name="keywords" content="free tv, live tv, iptv, streaming, online television, free channels">
    <link rel="stylesheet" href="styles.css">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap"></noscript>
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></noscript>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ“º</text></svg>">
    <link rel="manifest" href="manifest.json">
    <style>
        /* Critical CSS for fast initial render */
        body { 
            margin: 0; 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #f1f5f9;
            min-height: 100vh;
        }
        .preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.3s ease;
        }
        .preloader-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid #334155;
            border-top: 3px solid #2563eb;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .fade-out {
            opacity: 0;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <!-- Preloader -->
    <div id="preloader" class="preloader">
        <div class="preloader-spinner"></div>
    </div>
    <header>
        <div class="container">
            <div class="header-left">
                <div class="logo">
                    <i class="fas fa-tv"></i>
                    <div>
                        <h1>Free TV</h1>
                        <div class="tagline">by CloudNextra Solutions</div>
                    </div>
                </div>
            </div>
            <div class="header-right">
                <button id="favoriteBtn" class="header-btn" title="My Favorites">
                    <i class="fas fa-heart"></i>
                    <span class="favorites-count">0</span>
                </button>
                <button id="themeToggle" class="header-btn" title="Toggle Theme">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </header>

    <nav class="main-nav">
        <div class="container">
            <div class="search-bar">
                <i class="fas fa-search"></i>
                <input type="text" id="searchInput" placeholder="Search channels by name...">
                <button id="clearSearch" class="clear-search hidden">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="filter-controls">
                <select id="categoryFilter">
                    <option value="">All Categories</option>
                </select>
                <select id="countryFilter">
                    <option value="">All Countries</option>
                </select>
                <select id="languageFilter">
                    <option value="">All Languages</option>
                </select>
                <button id="clearFilters" class="clear-filters-btn">
                    <i class="fas fa-filter-circle-xmark"></i> Clear Filters
                </button>
            </div>
        </div>
    </nav>

    <main>
        <div class="container">
            <div class="content-wrapper">
                <!-- Sidebar for categories -->
                <aside class="sidebar">
                    <div class="sidebar-section">
                        <h3><i class="fas fa-star"></i> Quick Access</h3>
                        <ul class="quick-access-list">
                            <li id="showAllChannels" class="active">
                                <i class="fas fa-list"></i> All Channels
                            </li>
                            <li id="showFavorites">
                                <i class="fas fa-heart"></i> Favorites
                                <span class="badge">0</span>
                            </li>
                            <li id="showRecent">
                                <i class="fas fa-history"></i> Recently Watched
                            </li>
                        </ul>
                    </div>
                    
                    <div class="sidebar-section">
                        <h3><i class="fas fa-folder-open"></i> Categories</h3>
                        <ul id="categoryList" class="category-list"></ul>
                    </div>
                </aside>

                <!-- Main content area -->
                <div class="main-content">
                    <!-- Video player -->
                    <div id="playerContainer" class="player-container hidden">
                        <div class="player-header">
                            <div class="player-title-section">
                                <h2 id="currentChannelName">Select a channel to start watching</h2>
                                <button id="favoriteCurrentChannel" class="favorite-btn" title="Add to favorites">
                                    <i class="far fa-heart"></i>
                                </button>
                            </div>
                            <div class="player-controls-header">
                                <button id="pictureInPicture" class="player-control-btn" title="Picture in Picture">
                                    <i class="fas fa-compress-arrows-alt"></i>
                                </button>
                                <button id="fullscreenBtn" class="player-control-btn" title="Fullscreen">
                                    <i class="fas fa-expand"></i>
                                </button>
                                <button id="closePlayer" class="close-btn">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <div class="video-wrapper">
                            <video id="videoPlayer" controls autoplay playsinline>
                                Your browser does not support the video tag.
                            </video>
                            <div id="playerError" class="player-error hidden">
                                <i class="fas fa-exclamation-triangle"></i>
                                <p>Unable to load this channel. Please try another one.</p>
                                <button id="retryStream" class="retry-btn">
                                    <i class="fas fa-redo"></i> Try Again
                                </button>
                            </div>
                            <div id="loadingOverlay" class="loading-overlay hidden">
                                <div class="spinner"></div>
                                <p>Loading stream...</p>
                            </div>
                        </div>
                        <div class="player-info">
                            <div class="info-tags" id="channelInfo"></div>
                            <div class="stream-quality">
                                <label><i class="fas fa-signal"></i> Quality:</label>
                                <select id="streamQuality">
                                    <option value="0">Auto</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Channel grid -->
                    <div class="channels-header">
                        <div class="header-title">
                            <h2 id="sectionTitle">Available Channels</h2>
                            <p id="sectionSubtitle" class="section-subtitle"></p>
                        </div>
                        <div class="header-actions">
                            <div class="sort-control">
                                <label><i class="fas fa-sort"></i></label>
                                <select id="sortBy">
                                    <option value="name-asc">A-Z</option>
                                    <option value="name-desc">Z-A</option>
                                    <option value="country-asc">Country A-Z</option>
                                    <option value="recent">Recently Added</option>
                                </select>
                            </div>
                            <span id="channelCount" class="channel-count">Loading...</span>
                        </div>
                    </div>
                    
                    <div id="loadingSpinner" class="loading-spinner">
                        <div class="spinner-large"></div>
                        <p>Loading channels...</p>
                        <small>Please wait while we fetch the latest channels</small>
                    </div>

                    <div id="channelGrid" class="channel-grid"></div>

                    <div id="noResults" class="no-results hidden">
                        <i class="fas fa-search"></i>
                        <h3>No channels found</h3>
                        <p>Try adjusting your search or filter criteria</p>
                        <button id="resetFiltersBtn" class="reset-btn">
                            <i class="fas fa-redo"></i> Reset All Filters
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>About Free TV</h3>
                    <p>Your free source for live television streaming from around the world.</p>
                    <p class="copyright">&copy; 2025 CloudNextra Solutions. All rights reserved.</p>
                </div>
                <div class="footer-section">
                    <h3>Information</h3>
                    <p>Channels provided by <a href="https://github.com/iptv-org/iptv" target="_blank">IPTV-org</a></p>
                    <p>Open source project for free and legal IPTV channels</p>
                </div>
                <div class="footer-section">
                    <h3>Contact</h3>
                    <p><i class="fas fa-envelope"></i> info@cloudnextra.com</p>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Toast Notification -->
    <div id="toast" class="toast hidden">
        <i class="toast-icon"></i>
        <span class="toast-message"></span>
    </div>

    <!-- Scroll to Top Button -->
    <button id="scrollToTop" class="scroll-to-top hidden">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script src="https://cdn.jsdelivr.net/npm/hls.js@1.4.12/dist/hls.min.js" defer></script>
    <script src="script.js" defer></script>
    <script>
        // Preload critical resources
        window.addEventListener('load', function() {
            // Preload fallback HLS.js if needed
            if (typeof Hls === 'undefined') {
                console.log('Loading HLS.js fallback...');
                const fallbackScript = document.createElement('script');
                fallbackScript.src = 'https://unpkg.com/hls.js@latest/dist/hls.min.js';
                fallbackScript.onerror = function() {
                    console.warn('HLS.js CDN failed to load. Video streaming may not work for some formats.');
                };
                document.head.appendChild(fallbackScript);
            }
        });
    </script>
</body>
</html>
